<%- include('../partials/header') %>

<section class="mb-4" style="max-width: 700px; margin: 0 auto">
  <h2 class="section-title"><%= coupon ? 'Edit Coupon' : 'New Coupon' %></h2>

  <form method="POST">
    <div class="form-group">
      <label class="form-label">Code</label>
      <input class="form-control" name="code" value="<%= coupon ? coupon.code : '' %>" required />
    </div>
    <div class="form-group">
      <label class="form-label">Type</label>
      <select class="form-control" name="type">
        <option value="percent" <%= coupon && coupon.type==='percent'?'selected':'' %>>Percent</option>
        <option value="fixed" <%= coupon && coupon.type==='fixed'?'selected':'' %>>Fixed</option>
      </select>
    </div>
    <div class="form-group">
      <label class="form-label">Value</label>
      <input class="form-control" type="number" step="0.01" name="value" value="<%= coupon ? coupon.value : '' %>" required />
    </div>
    <div class="form-group">
      <label class="form-label">Min Order</label>
      <input class="form-control" type="number" step="0.01" name="min_order" value="<%= coupon ? coupon.min_order : 0 %>" />
    </div>
    <div class="form-group">
      <label class="form-label">Max Uses</label>
      <input class="form-control" type="number" name="max_uses" value="<%= coupon ? (coupon.max_uses || '') : '' %>" />
    </div>
    <div class="form-group">
      <label class="form-label">Active</label>
      <select class="form-control" name="active">
        <option value="true" <%= coupon && coupon.active ? 'selected' : '' %>>Yes</option>
        <option value="false" <%= coupon && !coupon.active ? 'selected' : '' %>>No</option>
      </select>
    </div>
    <div class="form-group">
      <label class="form-label">Valid From (optional)</label>
      <input class="form-control" type="datetime-local" name="valid_from" value="<%= coupon && coupon.valid_from ? coupon.valid_from.toISOString().slice(0,16) : '' %>" />
    </div>
    <div class="form-group">
      <label class="form-label">Valid To (optional)</label>
      <input class="form-control" type="datetime-local" name="valid_to" value="<%= coupon && coupon.valid_to ? coupon.valid_to.toISOString().slice(0,16) : '' %>" />
    </div>

    <button class="btn" type="submit"><%= coupon ? 'Update' : 'Create' %></button>
  </form>
</section>

<%- include('../partials/footer') %>




