<%- include('../partials/header') %>

<section class="mb-4">
  <div
    class="product-detail-container"
    style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem"
  >
    <div class="product-image-container">
      <img
        src="<%= product.image_url || '/images/placeholder.jpg' %>"
        alt="<%= product.name %>"
        style="
          width: 100%;
          border-radius: 8px;
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        "
      />
    </div>

    <div class="product-info-container">
      <h1><%= product.name %></h1>
      <p
        class="product-category"
        style="color: #6c757d; font-size: 1rem; margin-bottom: 1rem"
      >
        Category: <%= product.category_name %>
      </p>
      <p
        class="product-price"
        style="
          font-size: 1.8rem;
          font-weight: bold;
          color: #4e73df;
          margin-bottom: 1.5rem;
        "
      >
        $<%= product.price.toFixed(2) %>
      </p>

      <div class="product-description" style="margin-bottom: 2rem">
        <h3>Description</h3>
        <p><%= product.description %></p>
      </div>

      <div class="product-actions">
        <% if (user) { %>
        <div
          class="quantity-control"
          style="display: flex; align-items: center; margin-bottom: 1rem"
        >
          <label for="quantity" class="form-label" style="margin-right: 10px"
            >Quantity:</label
          >
          <input
            type="number"
            id="quantity"
            class="form-control"
            value="1"
            min="1"
            style="width: 80px; margin-right: 15px"
          />
          <button
            class="btn add-to-cart"
            data-product-id="<%= product.product_id %>"
            style="padding: 0.75rem 1.5rem"
          >
            Add to Cart
          </button>
        </div>
        <% } else { %>
        <a href="/login" class="btn" style="padding: 0.75rem 1.5rem"
          >Login to Purchase</a
        >
        <% } %>
      </div>
    </div>
  </div>
</section>

<script>
  document
    .querySelector(".add-to-cart")
    ?.addEventListener("click", function () {
      const productId = this.dataset.productId;
      const quantity = document.getElementById("quantity").value;
      addToCart(productId, quantity);
    });
</script>

<%- include('../partials/footer') %>
